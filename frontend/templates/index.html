<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>News Topic Predictor</title>
    <link rel="stylesheet" href="/static/styles.css">
    <style>
        body {
            text-align: center;
            margin-top: 50px;
            font-family: Arial, sans-serif;
        }

        #inputSection {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
        }

        #resultSection {
            display: none;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <h1 style="text-align: center;">News Topic Predictor</h1>

    <div class="container">
        <div id="inputSection">
            <input type="text" id="newsInput" placeholder="Enter news title here" />
            <button onclick="predict()">Predict</button>
        </div>

        <div id="resultSection">
            <p class="result"><strong>Predicted Topic Category:</strong> <span id="category"></span></p>
            <p class="result"><strong>Most Similar News Article Snippet:</strong> <span id="snippet"></span></p>
            <p class="result"><strong>Similarity Score:</strong> <span id="score"></span></p>
        </div>
    </div>
</body>


    <script>
        document.getElementById('newsInput').addEventListener('keydown', function (event) {
            if (event.key === 'Enter') {
                predict();
        }
    });

        async function predict() {
            const text = document.getElementById('newsInput').value;
            if (!text) {
                alert('Please enter some news text!');
                return;
            }

            const response = await fetch('/predict', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ text: text })
            });

            if (!response.ok) {
                alert('Error: ' + response.statusText);
                return;
            }

            const result = await response.json();

            document.getElementById('category').textContent = result.category;
            document.getElementById('snippet').textContent = result.text.length > 100 ? result.text.slice(0, 100) + '...' : result.text;
            document.getElementById('score').textContent = result.similarity_score.toFixed(3);

            document.getElementById('resultSection').style.display = 'block';
        }
    </script>
</body>
</html>
